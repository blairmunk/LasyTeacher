{% if formulas %}
<div class="formula-preview mt-2">
    <small class="text-muted">üîç –§–æ—Ä–º—É–ª—ã –≤ —Ç–µ–∫—Å—Ç–µ:</small>
    {% if has_errors %}
        <span class="badge bg-danger ms-1">–û—à–∏–±–∫–∏</span>
    {% elif has_warnings %}
        <span class="badge bg-warning text-dark ms-1">–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è</span>
    {% else %}
        <span class="badge bg-success ms-1">–û–ö</span>
    {% endif %}
    
    <div class="formula-list mt-1">
        {% for formula in formulas %}
            <div class="badge bg-light text-dark me-1 mb-1 d-inline-block">
                {% if formula.validation.is_valid %}
                    <span class="text-success">‚úì</span>
                {% else %}
                    <span class="text-danger">‚úó</span>
                {% endif %}
                
                {% if formula.type == 'display' %}
                    $${{ formula.content|truncatechars:30 }}$$
                {% else %}
                    ${{ formula.content|truncatechars:30 }}$
                {% endif %}
            </div>
        {% endfor %}
        
        {% if has_more %}
            <small class="text-muted">–∏ –µ—â–µ {{ total_count|add:"-3" }}...</small>
        {% endif %}
    </div>
</div>
{% endif %}
