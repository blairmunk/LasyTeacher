You are an expert software architect. The user is providing you with the complete source code for a project, contained in a single file. Your task is to meticulously analyze the provided codebase to gain a comprehensive understanding of its structure, functionality, dependencies, and overall architecture.

A file tree is provided below to give you a high-level overview. The subsequent sections contain the full content of each file, clearly marked with "// FILE: <path>".

Your instructions are:
1.  **Analyze Thoroughly:** Read through every file to understand its purpose and how it interacts with other files.
2.  **Identify Key Components:** Pay close attention to configuration files (like package.json, pyproject.toml), entry points (like index.js, main.py), and core logic.

## Project File Tree

```
latex_generator/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ admin.py
‚îú‚îÄ‚îÄ apps.py
‚îú‚îÄ‚îÄ combicode.txt
‚îú‚îÄ‚îÄ generators
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ base.py
‚îÇ   ‚îú‚îÄ‚îÄ registry.py
‚îÇ   ‚îî‚îÄ‚îÄ work_generator.py
‚îú‚îÄ‚îÄ management
‚îÇ   ‚îî‚îÄ‚îÄ commands
‚îÇ       ‚îú‚îÄ‚îÄ generate_latex.py
‚îÇ       ‚îî‚îÄ‚îÄ list_generators.py
‚îú‚îÄ‚îÄ migrations
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ models.py
‚îú‚îÄ‚îÄ templates
‚îÇ   ‚îú‚îÄ‚îÄ admin
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ latex_generator
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ generate.html
‚îÇ   ‚îî‚îÄ‚îÄ latex
‚îÇ       ‚îú‚îÄ‚îÄ base
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ document_base.tex
‚îÇ       ‚îî‚îÄ‚îÄ work
‚îÇ           ‚îú‚îÄ‚îÄ all_variants.tex
‚îÇ           ‚îî‚îÄ‚îÄ work_all_variants.tex
‚îú‚îÄ‚îÄ tests
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ test_basic.py
‚îú‚îÄ‚îÄ tests.py
‚îú‚îÄ‚îÄ urls.py
‚îú‚îÄ‚îÄ utils
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ compilation.py
‚îÇ   ‚îú‚îÄ‚îÄ image_utils.py
‚îÇ   ‚îî‚îÄ‚îÄ latex_utils.py
‚îî‚îÄ‚îÄ views.py
```

---

// FILE: __init__.py
```

```

// FILE: admin.py
```
from django.contrib import admin
from django.http import HttpResponseRedirect
from django.urls import path
from django.shortcuts import render
from django.contrib import messages
from .generators.registry import registry
from works.models import Work

class LaTeXGeneratorAdmin:
    """–ê–¥–º–∏–Ω–∫–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è LaTeX –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞–º–∏"""
    
    def __init__(self, admin_site):
        self.admin_site = admin_site
    
    def get_urls(self):
        urls = [
            path('latex-generator/', self.admin_site.admin_view(self.generate_view), name='latex_generator_generate'),
        ]
        return urls
    
    def generate_view(self, request):
        """–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤"""
        if request.method == 'POST':
            doc_type = request.POST.get('type')
            object_id = request.POST.get('object_id')
            output_format = request.POST.get('format', 'pdf')
            with_answers = request.POST.get('with_answers') == 'on'
            
            try:
                generator_class = registry.get_generator(doc_type)
                
                if doc_type == 'work':
                    work = Work.objects.get(pk=object_id)
                    generator = generator_class(output_dir='latex_output')
                    
                    if with_answers:
                        files = generator.generate_with_answers(work, output_format)
                    else:
                        files = generator.generate(work, output_format)
                    
                    messages.success(request, f'–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: {", ".join(files)}')
                
            except Exception as e:
                messages.error(request, f'–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: {e}')
            
            return HttpResponseRedirect(request.path)
        
        # GET –∑–∞–ø—Ä–æ—Å - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É
        context = {
            'title': '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è LaTeX –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤',
            'available_generators': registry.get_available_types(),
            'works': Work.objects.all()[:10],  # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–µ 10 —Ä–∞–±–æ—Ç
        }
        
        return render(request, 'admin/latex_generator/generate.html', context)

# –í–†–ï–ú–ï–ù–ù–û –£–ë–ò–†–ê–ï–ú –†–ï–ì–ò–°–¢–†–ê–¶–ò–Æ –ê–î–ú–ò–ù–ö–ò
# admin.site.register(LaTeXGeneratorProxy, LaTeXGeneratorAdmin)

```

// FILE: apps.py
```
from django.apps import AppConfig

class LatexGeneratorConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'latex_generator'
    verbose_name = 'LaTeX Generator'
    
    def ready(self):
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"""
        pass

```

// FILE: combicode.txt
```

```

// FILE: generators/__init__.py
```
"""–≠–∫—Å–ø–æ—Ä—Ç –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤"""

from .base import BaseLatexGenerator
from .work_generator import WorkLatexGenerator
from .registry import registry

__all__ = [
    'BaseLatexGenerator',
    'WorkLatexGenerator',
    'registry',
]

```

// FILE: generators/base.py
```
"""–ë–∞–∑–æ–≤—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä LaTeX –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤"""

from abc import ABC, abstractmethod
from typing import Dict, Any, List, Optional
from pathlib import Path
from django.template.loader import render_to_string
from latex_generator.utils import sanitize_filename, compile_latex_to_pdf

class BaseLatexGenerator(ABC):
    """–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤ LaTeX"""
    
    def __init__(self, output_dir: Path):
        self.output_dir = Path(output_dir)
        self.output_dir.mkdir(parents=True, exist_ok=True)
    
    @abstractmethod
    def get_template_name(self) -> str:
        """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–º—è —à–∞–±–ª–æ–Ω–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏"""
        pass
    
    @abstractmethod
    def prepare_context(self, source_object: Any) -> Dict[str, Any]:
        """–ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —à–∞–±–ª–æ–Ω–∞"""
        pass
    
    @abstractmethod
    def get_output_filename(self, source_object: Any) -> str:
        """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–º—è —Ñ–∞–π–ª–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è"""
        pass
    
    def generate(self, source_object: Any, output_format: str = 'pdf') -> List[str]:
        """
        –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç LaTeX –¥–æ–∫—É–º–µ–Ω—Ç
        
        Args:
            source_object: –û–±—ä–µ–∫—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (Work, Report, etc.)
            output_format: 'latex' –∏–ª–∏ 'pdf'
            
        Returns:
            –°–ø–∏—Å–æ–∫ –ø—É—Ç–µ–π –∫ —Å–æ–∑–¥–∞–Ω–Ω—ã–º —Ñ–∞–π–ª–∞–º
        """
        # –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç
        context = self.prepare_context(source_object)
        
        # –†–µ–Ω–¥–µ—Ä–∏–º —à–∞–±–ª–æ–Ω
        template_name = self.get_template_name()
        latex_content = render_to_string(template_name, context)
        
        # –°–æ—Ö—Ä–∞–Ω—è–µ–º LaTeX —Ñ–∞–π–ª
        filename = self.get_output_filename(source_object)
        latex_filename = sanitize_filename(filename)
        latex_file = self.output_dir / latex_filename
        
        with open(latex_file, 'w', encoding='utf-8') as f:
            f.write(latex_content)
        
        files = [str(latex_file)]
        
        # –ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º –≤ PDF –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
        if output_format == 'pdf':
            pdf_file = compile_latex_to_pdf(latex_file, self.output_dir)
            if pdf_file:
                files.append(str(pdf_file))
        
        return files

```

// FILE: generators/registry.py
```
"""–†–µ–µ—Å—Ç—Ä –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤ LaTeX"""

from typing import Dict, Type
from .base import BaseLatexGenerator
from .work_generator import WorkLatexGenerator

class GeneratorRegistry:
    """–†–µ–µ—Å—Ç—Ä –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤"""
    
    _generators: Dict[str, Type[BaseLatexGenerator]] = {
        'work': WorkLatexGenerator,
        # –í –±—É–¥—É—â–µ–º –¥–æ–±–∞–≤–∏–º:
        # 'report': ReportLatexGenerator,
        # 'certificate': CertificateLatexGenerator,
    }
    
    @classmethod
    def get_generator(cls, generator_type: str) -> Type[BaseLatexGenerator]:
        """–ü–æ–ª—É—á–∏—Ç—å –∫–ª–∞—Å—Å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –ø–æ —Ç–∏–ø—É"""
        if generator_type not in cls._generators:
            available = ', '.join(cls._generators.keys())
            raise ValueError(f"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–∏–ø –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞: {generator_type}. –î–æ—Å—Ç—É–ø–Ω—ã–µ: {available}")
        
        return cls._generators[generator_type]
    
    @classmethod
    def get_available_types(cls) -> list:
        """–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤"""
        return list(cls._generators.keys())
    
    @classmethod
    def register_generator(cls, generator_type: str, generator_class: Type[BaseLatexGenerator]):
        """–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä"""
        cls._generators[generator_type] = generator_class

# –≠–∫–∑–µ–º–ø–ª—è—Ä –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
registry = GeneratorRegistry()

```

// FILE: generators/work_generator.py
```
"""–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä LaTeX –¥–ª—è —Ä–∞–±–æ—Ç"""

from typing import Dict, Any
from latex_generator.utils import sanitize_latex, prepare_images
from .base import BaseLatexGenerator

class WorkLatexGenerator(BaseLatexGenerator):
    """–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä LaTeX –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç"""
    
    def get_template_name(self) -> str:
        return 'latex/work/all_variants.tex'
    
    def get_output_filename(self, work) -> str:
        return f"{work.name}_all_variants.tex"
    
    def prepare_context(self, work) -> Dict[str, Any]:
        """–ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã"""
        
        # –ò–°–ü–†–ê–í–õ–ï–ù–û: variants -> variant_set
        variants = work.variant_set.all().order_by('number')
        
        # –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞
        all_variants_data = []
        for variant in variants:
            variant_data = self._prepare_variant_context(variant)
            all_variants_data.append(variant_data)
        
        return {
            'work': work,
            'work_name': sanitize_latex(work.name),
            'variants': all_variants_data,
            'total_variants': len(all_variants_data),
            'with_answers': getattr(self, '_with_answers', False),
        }
    
    def _prepare_variant_context(self, variant):
        """–ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –æ–¥–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞"""
        tasks = variant.tasks.all().order_by('id')  # –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫
        
        # –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–¥–∞–Ω–∏—è —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
        prepared_tasks = []
        for i, task in enumerate(tasks, 1):
            task_data = {
                'number': i,
                'task': task,
                'text': sanitize_latex(task.text),
                'answer': sanitize_latex(task.answer),
                'images': []
            }
            
            # –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            for image in task.images.all().order_by('order'):
                image_data = prepare_images(image, self.output_dir)
                if image_data:
                    task_data['images'].append(image_data)
            
            prepared_tasks.append(task_data)
        
        return {
            'variant': variant,
            'tasks': prepared_tasks,
            'total_tasks': len(prepared_tasks),
        }
    
    def generate_with_answers(self, work, output_format='pdf'):
        """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å –æ—Ç–≤–µ—Ç–∞–º–∏"""
        self._with_answers = True
        try:
            return self.generate(work, output_format)
        finally:
            self._with_answers = False

```

// FILE: management/commands/generate_latex.py
```
"""–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ LaTeX –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤"""

from pathlib import Path
from django.core.management.base import BaseCommand, CommandError
from django.apps import apps

from latex_generator.generators.registry import registry

class Command(BaseCommand):
    help = '–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è LaTeX –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤'
    
    def add_arguments(self, parser):
        parser.add_argument(
            'type', 
            choices=registry.get_available_types(),
            help='–¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏'
        )
        parser.add_argument('object_id', type=int, help='ID –æ–±—ä–µ–∫—Ç–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏')
        parser.add_argument(
            '--format',
            choices=['latex', 'pdf'],
            default='pdf',
            help='–§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞: latex –∏–ª–∏ pdf'
        )
        parser.add_argument(
            '--output-dir',
            default='latex_output',
            help='–ü–∞–ø–∫–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤'
        )
        parser.add_argument(
            '--with-answers',
            action='store_true',
            help='–í–∫–ª—é—á–∏—Ç—å –æ—Ç–≤–µ—Ç—ã (–¥–ª—è —Ä–∞–±–æ—Ç)'
        )
    
    def handle(self, *args, **options):
        doc_type = options['type']
        object_id = options['object_id']
        output_format = options['format']
        output_dir = Path(options['output_dir'])
        with_answers = options['with_answers']
        
        # –ü–æ–ª—É—á–∞–µ–º –∫–ª–∞—Å—Å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞
        generator_class = registry.get_generator(doc_type)
        
        # –ü–æ–ª—É—á–∞–µ–º –æ–±—ä–µ–∫—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
        try:
            model_class = self._get_model_class(doc_type)
            obj = model_class.objects.get(pk=object_id)
        except model_class.DoesNotExist:
            raise CommandError(f'{doc_type.title()} —Å ID {object_id} –Ω–µ –Ω–∞–π–¥–µ–Ω')
        
        # –°–æ–∑–¥–∞–µ–º –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
        generator = generator_class(output_dir)
        
        # –í—ã–≤–æ–¥–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
        self.stdout.write(f'üöÄ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è {doc_type} –¥–ª—è: {obj}')
        if doc_type == 'work':
            # –ò–°–ü–†–ê–í–õ–ï–ù–û: variants -> variant_set
            variants_count = obj.variant_set.count()
            if variants_count == 0:
                raise CommandError('–£ —Ä–∞–±–æ—Ç—ã –Ω–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤. –°–Ω–∞—á–∞–ª–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã.')
            self.stdout.write(f'üìã –ù–∞–π–¥–µ–Ω–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤: {variants_count}')
        
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –¥–æ–∫—É–º–µ–Ω—Ç
        try:
            if doc_type == 'work' and with_answers:
                files = generator.generate_with_answers(obj, output_format)
            else:
                files = generator.generate(obj, output_format)
            
            self.stdout.write(
                self.style.SUCCESS(f'üéâ –ì–æ—Ç–æ–≤–æ! –°–æ–∑–¥–∞–Ω–æ —Ñ–∞–π–ª–æ–≤: {len(files)}')
            )
            
            for file_path in files:
                self.stdout.write(f'  üìÑ {file_path}')
                
        except Exception as e:
            raise CommandError(f'–û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: {e}')
    
    def _get_model_class(self, doc_type):
        """–ü–æ–ª—É—á–∏—Ç—å –∫–ª–∞—Å—Å –º–æ–¥–µ–ª–∏ –ø–æ —Ç–∏–ø—É –¥–æ–∫—É–º–µ–Ω—Ç–∞"""
        model_mapping = {
            'work': 'works.Work',
            # –í –±—É–¥—É—â–µ–º –¥–æ–±–∞–≤–∏–º:
            # 'report': 'reports.Report',
        }
        
        if doc_type not in model_mapping:
            raise CommandError(f'–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞: {doc_type}')
        
        app_label, model_name = model_mapping[doc_type].split('.')
        return apps.get_model(app_label, model_name)

```

// FILE: management/commands/list_generators.py
```
"""–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤"""

from django.core.management.base import BaseCommand
from latex_generator.generators.registry import registry

class Command(BaseCommand):
    help = '–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤ LaTeX'
    
    def handle(self, *args, **options):
        self.stdout.write('üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã LaTeX:')
        
        for generator_type in registry.get_available_types():
            generator_class = registry.get_generator(generator_type)
            self.stdout.write(f'  ‚Ä¢ {generator_type}: {generator_class.__name__}')
        
        self.stdout.write('\nüí° –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:')
        self.stdout.write('  python manage.py generate_latex <—Ç–∏–ø> <id> [–æ–ø—Ü–∏–∏]')
        self.stdout.write('\nüîß –ü—Ä–∏–º–µ—Ä—ã:')
        self.stdout.write('  python manage.py generate_latex work 1 --format pdf')
        self.stdout.write('  python manage.py generate_latex work 1 --with-answers')

```

// FILE: migrations/__init__.py
```

```

// FILE: models.py
```
from django.db import models

# Create your models here.

```

// FILE: templates/admin/latex_generator/generate.html
```
{% extends "admin/base_site.html" %}
{% load i18n %}

{% block title %}–ì–µ–Ω–µ—Ä–∞—Ü–∏—è LaTeX –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤{% endblock %}

{% block content_title %}
    <h1>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è LaTeX –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</h1>
{% endblock %}

{% block content %}
<div class="module filtered">
    <form method="post">
        {% csrf_token %}
        
        <div class="form-row">
            <div class="field-box">
                <label for="type">–¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞:</label>
                <select name="type" id="type" required>
                    {% for generator_type in available_generators %}
                        <option value="{{ generator_type }}">{{ generator_type|capfirst }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        
        <div class="form-row">
            <div class="field-box">
                <label for="object_id">–û–±—ä–µ–∫—Ç:</label>
                <select name="object_id" id="object_id" required>
                    {% for work in works %}
                        <option value="{{ work.id }}">{{ work.name }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        
        <div class="form-row">
            <div class="field-box">
                <label for="format">–§–æ—Ä–º–∞—Ç:</label>
                <select name="format" id="format">
                    <option value="pdf">PDF</option>
                    <option value="latex">LaTeX</option>
                </select>
            </div>
        </div>
        
        <div class="form-row">
            <div class="field-box">
                <label for="with_answers">
                    <input type="checkbox" name="with_answers" id="with_answers">
                    –í–∫–ª—é—á–∏—Ç—å –æ—Ç–≤–µ—Ç—ã
                </label>
            </div>
        </div>
        
        <div class="submit-row">
            <input type="submit" value="–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å" class="default">
        </div>
    </form>
</div>
{% endblock %}

```

// FILE: templates/latex/base/document_base.tex
```
{% comment %}
–ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è LaTeX –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
{% endcomment %}

\documentclass[12pt,a4paper]{article}

% –ü–∞–∫–µ—Ç—ã –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
\usepackage[utf8]{inputenc}
\usepackage[T2A]{fontenc}
\usepackage[russian]{babel}

% –ü–∞–∫–µ—Ç—ã –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
\usepackage[margin=2cm]{geometry}
\usepackage{amsmath, amsfonts, amssymb}
\usepackage{graphicx}
\usepackage{enumitem}
\usepackage{titlesec}
\usepackage{fancyhdr}

% –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
\titleformat{\section}{\large\bfseries}{\thesection.}{1em}{}
\titleformat{\subsection}{\normalsize\bfseries}{\thesubsection.}{1em}{}

% –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–ª–æ–Ω—Ç–∏—Ç—É–ª–æ–≤
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{ {% block header_left %}{% endblock %} }
\fancyhead[R]{ {% block header_right %}\thepage{% endblock %} }
\fancyfoot[C]{ {% block footer_center %}{% endblock %} }

% –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç—Å—Ç—É–ø–æ–≤
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt}

\begin{document}

{% block content %}
{% endblock %}

\end{document}

```

// FILE: templates/latex/work/all_variants.tex
```
\documentclass[12pt,a4paper]{article}

% –ü–∞–∫–µ—Ç—ã –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
\usepackage[utf8]{inputenc}
\usepackage[T2A]{fontenc}
\usepackage[russian]{babel}

% –ü–∞–∫–µ—Ç—ã –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
\usepackage[margin=2cm]{geometry}
\usepackage{amsmath, amsfonts, amssymb}
\usepackage{graphicx}
\usepackage{enumitem}
\usepackage{titlesec}
\usepackage{fancyhdr}

% –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
\titleformat{\section}{\large\bfseries}{\thesection.}{1em}{}
\titleformat{\subsection}{\normalsize\bfseries}{\thesubsection.}{1em}{}

% –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–ª–æ–Ω—Ç–∏—Ç—É–ª–æ–≤
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{ {{work_name}} }
\fancyhead[R]{\thepage}
\fancyfoot[C]{–í—Å–µ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤: {{ total_variants }}}

% –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç—Å—Ç—É–ø–æ–≤
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt}

\begin{document}

% –¢–∏—Ç—É–ª—å–Ω—ã–π –ª–∏—Å—Ç
\begin{center}
    {\LARGE\bfseries {{ work_name }} }\\[0.8cm]
    {% if work.duration %}
    {\large –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: {{ work.duration }} –º–∏–Ω—É—Ç}\\[0.4cm]
    {% endif %}
    {\large –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤: {{ total_variants }}}\\[0.3cm]
    {\normalsize \today}
\end{center}

\vspace{1cm}

% –û–±—â–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
{\small\textit{%
–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—á–∏—Ç–∞–π—Ç–µ –∑–∞–¥–∞–Ω–∏—è –∏ –¥–∞–π—Ç–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–µ –æ—Ç–≤–µ—Ç—ã. \\
–ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ —Ö–æ–¥ —Ä–µ—à–µ–Ω–∏—è. –ö–∞–∂–¥—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
}}

\newpage

% –ü–µ—Ä–µ–±–∏—Ä–∞–µ–º –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
{% for variant_data in variants %}

% –ó–∞–≥–æ–ª–æ–≤–æ–∫ –≤–∞—Ä–∏–∞–Ω—Ç–∞
\begin{center}
    {\Large\bfseries –í–∞—Ä–∏–∞–Ω—Ç {{ variant_data.variant.number }} }
\end{center}

\vspace{0.8cm}

% –ó–∞–¥–∞–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–∞
{% for task_data in variant_data.tasks %}
\section*{–ó–∞–¥–∞–Ω–∏–µ {{ task_data.number }}}

{{ task_data.text }}

{% comment %}
TODO: –ó–¥–µ—Å—å –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–æ—Å–ª–µ Step 4
{% for image in task_data.images %}
    % –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
{% endfor %}
{% endcomment %}

\vspace{1cm}

{% endfor %}

% –ù–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞ (–∫—Ä–æ–º–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ)
{% if not forloop.last %}
\newpage
{% endif %}

{% endfor %}

{% if with_answers %}
\newpage
% –õ–∏—Å—Ç –æ—Ç–≤–µ—Ç–æ–≤
\section*{\centering –û–¢–í–ï–¢–´}

{% for variant_data in variants %}
\subsection*{–í–∞—Ä–∏–∞–Ω—Ç {{ variant_data.variant.number }}}

\begin{enumerate}
{% for task_data in variant_data.tasks %}
\item {{ task_data.answer }}
{% endfor %}
\end{enumerate}

{% if not forloop.last %}\vspace{0.5cm}{% endif %}

{% endfor %}
{% endif %}

\end{document}

```

// FILE: templates/latex/work/work_all_variants.tex
```
\documentclass[12pt,a4paper]{article}

% –ü–∞–∫–µ—Ç—ã –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
\usepackage[utf8]{inputenc}
\usepackage[T2A]{fontenc}
\usepackage[russian]{babel}

% –ü–∞–∫–µ—Ç—ã –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
\usepackage[margin=2cm]{geometry}
\usepackage{amsmath, amsfonts, amssymb}
\usepackage{graphicx}
\usepackage{wrapfig}
\usepackage{enumitem}
\usepackage{titlesec}
\usepackage{fancyhdr}

% –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
\titleformat{\section}{\large\bfseries}{\thesection.}{1em}{}
\titleformat{\subsection}{\normalsize\bfseries}{\thesubsection.}{1em}{}

% –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–ª–æ–Ω—Ç–∏—Ç—É–ª–æ–≤
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{ {{ work_name }} }
\fancyhead[R]{\thepage}
\fancyfoot[C]{–í—Å–µ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤: {{ total_variants }}}

% –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç—Å—Ç—É–ø–æ–≤
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt}

\begin{document}

% –¢–∏—Ç—É–ª—å–Ω—ã–π –ª–∏—Å—Ç
\begin{center}
    {\LARGE\bfseries {{ work_name }} }\\[0.8cm]
    {% if work.duration %}
    {\large –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: {{ work.duration }} –º–∏–Ω—É—Ç}\\[0.4cm]
    {% endif %}
    {\large –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤: {{ total_variants }}}\\[0.3cm]
    {\normalsize \today}
\end{center}

\vspace{1cm}

% –û–±—â–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
{\small\textit{%
–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—á–∏—Ç–∞–π—Ç–µ –∑–∞–¥–∞–Ω–∏—è –∏ –¥–∞–π—Ç–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–µ –æ—Ç–≤–µ—Ç—ã. \\
–ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ —Ö–æ–¥ —Ä–µ—à–µ–Ω–∏—è. –ö–∞–∂–¥—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
}}

\newpage

% –ü–µ—Ä–µ–±–∏—Ä–∞–µ–º –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
{% for variant_data in variants %}

% –ó–∞–≥–æ–ª–æ–≤–æ–∫ –≤–∞—Ä–∏–∞–Ω—Ç–∞
\begin{center}
    {\Large\bfseries –í–∞—Ä–∏–∞–Ω—Ç {{ variant_data.variant.number }} }
\end{center}

\vspace{0.8cm}

% –ó–∞–¥–∞–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–∞
{% for task_data in variant_data.tasks %}
\section*{–ó–∞–¥–∞–Ω–∏–µ {{ task_data.number }}}

{{ task_data.text }}

{% for image in task_data.images %}
    {% if image.latex_position.placement == 'figure' %}
    \begin{figure}[h]
        \centering
        \includegraphics[width={{ image.latex_position.width }}]{ {{ image.filename }} }
        {% if image.caption %}
        \caption{ {{ image.caption }} }
        {% endif %}
    \end{figure}
    {% elif image.latex_position.placement == 'wrapfigure' %}
    \begin{wrapfigure}{ {{ image.latex_position.align }} }{ {{ image.latex_position.width }} }
        \centering
        \includegraphics[width={{ image.latex_position.width }}]{ {{ image.filename }} }
        {% if image.caption %}
        \caption{ {{ image.caption }} }
        {% endif %}
    \end{wrapfigure}
    {% endif %}
{% endfor %}

\vspace{1cm}

{% endfor %}

% –ù–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞ (–∫—Ä–æ–º–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ)
{% if not forloop.last %}
\newpage
{% endif %}

{% endfor %}

{% if with_answers %}
\newpage
% –õ–∏—Å—Ç –æ—Ç–≤–µ—Ç–æ–≤
\section*{\centering –û–¢–í–ï–¢–´}

{% for variant_data in variants %}
\subsection*{–í–∞—Ä–∏–∞–Ω—Ç {{ variant_data.variant.number }}}

\begin{enumerate}
{% for task_data in variant_data.tasks %}
\item {{ task_data.answer }}
{% endfor %}
\end{enumerate}

{% if not forloop.last %}\vspace{0.5cm}{% endif %}

{% endfor %}
{% endif %}

\end{document}

```

// FILE: tests/__init__.py
```

```

// FILE: tests/test_basic.py
```
"""–ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —É—Ç–∏–ª–∏—Ç"""

from django.test import TestCase
from latex_generator.utils import sanitize_latex, sanitize_filename

class BasicUtilsTest(TestCase):
    """–ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã —É—Ç–∏–ª–∏—Ç"""
    
    def test_sanitize_latex_basic(self):
        """–¢–µ—Å—Ç –±–∞–∑–æ–≤–æ–≥–æ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è"""
        result = sanitize_latex("–ü—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç")
        self.assertEqual(result, "–ü—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç")
        
        result = sanitize_latex("–¶–µ–Ω–∞ $5 & —Å–∫–∏–¥–∫–∞ 10%")
        self.assertEqual(result, "–¶–µ–Ω–∞ \\$5 \\& —Å–∫–∏–¥–∫–∞ 10\\%")
    
    def test_sanitize_filename_basic(self):
        """–¢–µ—Å—Ç –æ—á–∏—Å—Ç–∫–∏ –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤"""
        result = sanitize_filename("test_file.tex")
        self.assertEqual(result, "test_file.tex")
        
        result = sanitize_filename("file<>*.tex")
        self.assertEqual(result, "file___.tex")

```

// FILE: tests.py
```
from django.test import TestCase

# Create your tests here.

```

// FILE: urls.py
```
from django.urls import path
from . import views

app_name = 'latex_generator'

urlpatterns = [
    # –í—Ä–µ–º–µ–Ω–Ω–æ —É–±–∏—Ä–∞–µ–º URL'—ã
    # path('generate/', views.GenerateView.as_view(), name='generate'),
    # path('status/', views.StatusView.as_view(), name='status'),
]

```

// FILE: utils/__init__.py
```
"""–≠–∫—Å–ø–æ—Ä—Ç –æ—Å–Ω–æ–≤–Ω—ã—Ö —É—Ç–∏–ª–∏—Ç"""

from .latex_utils import sanitize_latex, sanitize_filename
from .image_utils import prepare_images
from .compilation import compile_latex_to_pdf

__all__ = [
    'sanitize_latex',
    'sanitize_filename', 
    'prepare_images',
    'compile_latex_to_pdf',
]
```

// FILE: utils/compilation.py
```
"""–£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ LaTeX –≤ PDF"""

import os
import subprocess
from pathlib import Path

def compile_latex_to_pdf(latex_file, output_dir):
    """–ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç LaTeX —Ñ–∞–π–ª –≤ PDF"""
    try:
        # –ú–µ–Ω—è–µ–º —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è pdflatex
        old_cwd = os.getcwd()
        os.chdir(output_dir)
        
        # –ó–∞–ø—É—Å–∫–∞–µ–º pdflatex –¥–≤–∞–∂–¥—ã (–¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Å—Å—ã–ª–æ–∫)
        for i in range(2):
            result = subprocess.run([
                'pdflatex', 
                '-interaction=nonstopmode',
                '-halt-on-error',
                latex_file.name
            ], capture_output=True, text=True, encoding='utf-8')
            
            if result.returncode != 0:
                print(f"‚ùå –û—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ LaTeX (–ø—Ä–æ—Ö–æ–¥ {i+1}):")
                print(result.stderr)
                print("–õ–æ–≥ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏:")
                print(result.stdout[-1000:])  # –ü–æ—Å–ª–µ–¥–Ω–∏–µ 1000 —Å–∏–º–≤–æ–ª–æ–≤ –ª–æ–≥–∞
                os.chdir(old_cwd)
                return None
        
        os.chdir(old_cwd)
        
        pdf_file = latex_file.with_suffix('.pdf')
        return pdf_file if pdf_file.exists() else None
            
    except FileNotFoundError:
        print("‚ùå pdflatex –Ω–µ –Ω–∞–π–¥–µ–Ω. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ TeX Live:")
        print("sudo apt-get install texlive-latex-extra texlive-lang-cyrillic")
        return None
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏: {e}")
        return None

```

// FILE: utils/image_utils.py
```
"""–£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ LaTeX"""

import shutil
from pathlib import Path
from django.conf import settings
from .latex_utils import sanitize_latex

def prepare_images(task_image, output_dir):
    """–ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è LaTeX"""
    try:
        # –ü—É—Ç—å –∫ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é
        if hasattr(task_image.image, 'path'):
            original_path = Path(task_image.image.path)
        else:
            # –ï—Å–ª–∏ –ø—É—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π
            original_path = Path(settings.MEDIA_ROOT) / task_image.image.name
        
        if not original_path.exists():
            print(f"‚ö†Ô∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ: {original_path}")
            return None
        
        # –ö–æ–ø–∏—Ä—É–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –ø–∞–ø–∫—É –≤—ã–≤–æ–¥–∞
        image_filename = f"image_{task_image.task.id}_{task_image.id}{original_path.suffix}"
        dest_path = output_dir / image_filename
        shutil.copy2(original_path, dest_path)
        
        return {
            'filename': image_filename,
            'caption': sanitize_latex(task_image.caption or ''),
            'position': task_image.position,
            'order': task_image.order,
        }
        
    except Exception as e:
        print(f"‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è {task_image.id}: {e}")
        return None

```

// FILE: utils/latex_utils.py
```
"""LaTeX —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"""

import re

def sanitize_latex(text):
    """–≠–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã LaTeX"""
    if not text:
        return ''
    
    # –°–ª–æ–≤–∞—Ä—å –∑–∞–º–µ–Ω –¥–ª—è LaTeX
    replacements = {
        '\\': r'\textbackslash{}',
        '{': r'\{',
        '}': r'\}',
        '$': r'\$',
        '&': r'\&',
        '%': r'\%',
        '#': r'\#',
        '^': r'\textasciicircum{}',
        '_': r'\_',
        '~': r'\textasciitilde{}',
        '<': r'\textless{}',
        '>': r'\textgreater{}',
    }
    
    # –ü—Ä–∏–º–µ–Ω—è–µ–º –∑–∞–º–µ–Ω—ã
    result = text
    for char, replacement in replacements.items():
        result = result.replace(char, replacement)
    
    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫
    result = result.replace('\n', '\\\\ ')
    
    return result

def sanitize_filename(filename):
    """–û—á–∏—â–∞–µ—Ç –∏–º—è —Ñ–∞–π–ª–∞ –æ—Ç –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤"""
    # –£–±–∏—Ä–∞–µ–º –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã
    clean = re.sub(r'[<>:"/\\|?*]', '_', filename)
    # –£–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã
    clean = re.sub(r'\s+', '_', clean)
    return clean

```

// FILE: views.py
```
from django.shortcuts import render
from django.views.generic import TemplateView

class GenerateView(TemplateView):
    """–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤"""
    template_name = 'latex_generator/generate.html'
    
    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        context['title'] = '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è LaTeX –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤'
        return context

class StatusView(TemplateView):
    """–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏"""
    template_name = 'latex_generator/status.html'
    
    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        context['title'] = '–°—Ç–∞—Ç—É—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏'
        return context

```

