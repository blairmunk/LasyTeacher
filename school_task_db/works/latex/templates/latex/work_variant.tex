\documentclass[12pt,a4paper]{article}

% Пакеты для русского языка
\usepackage[utf8]{inputenc}
\usepackage[T2A]{fontenc}
\usepackage[russian]{babel}

% Пакеты для форматирования
\usepackage[margin=2cm]{geometry}
\usepackage{amsmath, amsfonts, amssymb}
\usepackage{graphicx}
\usepackage{wrapfig}
\usepackage{enumitem}
\usepackage{titlesec}
\usepackage{fancyhdr}

% Настройка заголовков
\titleformat{\section}{\large\bfseries}{\thesection.}{1em}{}
\titleformat{\subsection}{\normalsize\bfseries}{\thesubsection.}{1em}{}

% Настройка колонтитулов
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{ {{work_name}} }
\fancyhead[R]{Вариант {{ variant.number }}}
\fancyfoot[C]{\thepage}

% Настройка отступов
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt}

\begin{document}

% Заголовок работы
\begin{center}
    {\Large\bfseries {{ work_name }} }\\[0.5cm]
    {\large Вариант {{ variant.number }} }\\[0.3cm]
    {% if work.duration %}
    Время выполнения: {{ work.duration }} минут
    {% endif %}
\end{center}

\vspace{1cm}

% Инструкция (базовая)
{\small\textit{Внимательно прочитайте задания и дайте развернутые ответы. Показывайте ход решения.}}

\vspace{0.8cm}

% Задания
{% for task_data in tasks %}
\section*{Задание {{ task_data.number }}}

{{ task_data.text }}

{% for image in task_data.images %}
    {% if image.latex_position.placement == 'figure' %}
    \begin{figure}[h]
        \centering
        \includegraphics[width={{ image.latex_position.width }}]{ {{ image.filename }} }
        {% if image.caption %}
        \caption{ {{ image.caption }} }
        {% endif %}
    \end{figure}
    {% elif image.latex_position.placement == 'wrapfigure' %}
    \begin{wrapfigure}{ {{ image.latex_position.align }} }{ {{ image.latex_position.width }} }
        \centering
        \includegraphics[width={{ image.latex_position.width }}]{ {{ image.filename }} }
        {% if image.caption %}
        \caption{ {{ image.caption }} }
        {% endif %}
    \end{wrapfigure}
    {% endif %}
{% endfor %}

\vspace{1cm}

{% endfor %}

\end{document}
